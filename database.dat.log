/*C2*/SET SCHEMA PUBLIC
drop table if exists category CASCADE 
drop table if exists inventory_transaction CASCADE 
drop table if exists Product CASCADE 
drop table if exists product_supplier CASCADE 
drop table if exists suppliers CASCADE 
create table category (id bigint generated by default as identity (start with 1), description varchar(255), name varchar(255), primary key (id))
create table inventory_transaction (id bigint generated by default as identity (start with 1), quantity integer not null, timestamp timestamp, type varchar(20) not null, product_id bigint not null, primary key (id))
create table Product (id bigint generated by default as identity (start with 1), description varchar(255), quantity integer not null, name varchar(100) not null, price double, reorderLevel integer not null, category_id bigint, primary key (id))
create table product_supplier (product_id bigint not null, supplier_id bigint not null, primary key (product_id, supplier_id))
create table suppliers (id bigint generated by default as identity (start with 1), address varchar(255), contactName varchar(255), email varchar(255), name varchar(255), phone varchar(255), primary key (id))
alter table inventory_transaction add constraint FKo9c0v6aaa3wdjla03nks8ch07 foreign key (product_id) references Product
alter table Product add constraint FKc2202mx60t5xv58ir9kd6793e foreign key (category_id) references category
alter table product_supplier add constraint FKho94qs6u7b28w0oouextxwf5t foreign key (supplier_id) references suppliers
alter table product_supplier add constraint FK7cd26833bbdobdkkhy7lba2wj foreign key (product_id) references Product
INSERT INTO CATEGORY VALUES(1,'Electronic gadgets and devices','Electronics')
COMMIT
INSERT INTO CATEGORY VALUES(2,'Food and everyday consumables','Groceries')
COMMIT
INSERT INTO SUPPLIERS VALUES(1,NULL,NULL,NULL,'Acme Electronics',NULL)
COMMIT
INSERT INTO SUPPLIERS VALUES(2,NULL,NULL,NULL,'Foodies Market',NULL)
COMMIT
INSERT INTO PRODUCT VALUES(1,'42-inch 4K Smart TV',20,'Smart TV',399.99E0,5,1)
INSERT INTO PRODUCT_SUPPLIER VALUES(1,1)
COMMIT
INSERT INTO PRODUCT VALUES(2,'Fresh Red Apple',30,'Apple',0.39E0,25,2)
INSERT INTO PRODUCT_SUPPLIER VALUES(2,2)
COMMIT
